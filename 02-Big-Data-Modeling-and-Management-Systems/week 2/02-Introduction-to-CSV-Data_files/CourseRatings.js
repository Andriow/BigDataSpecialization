define("bundles/content-feedback/models/CourseRatings",["require","exports","module","underscore","bundles/content-feedback/constants/RatingValues","bundles/content-feedback/constants/LearnerAudiences","bundles/content-feedback/models/RatingCollection"],function(require,exports,module){"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var t=function(){function defineProperties(i,t){for(var n=0;n<t.length;n++){var e=t[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(i,e.key,e)}}return function(e,n,t){return n&&defineProperties(e.prototype,n),t&&defineProperties(e,t),e}}(),_=require("underscore"),e=require("bundles/content-feedback/constants/RatingValues"),n=require("bundles/content-feedback/constants/LearnerAudiences"),i=require("bundles/content-feedback/models/RatingCollection"),o=function(){function CourseRatings(){var t=this;_classCallCheck(this,CourseRatings),this.ratingValue=_(e).find(function(e){return-1===e.value}),this.learnerAudience=_(n).find(function(e){return"ALL_LEARNERS"===e.id}),this.statsMap={},this.reviewCollectionsMap={},_(n).each(function(a){var n=a.id,o={};_(e).each(function(e){o[e.value]=new i}),t.statsMap[n]=null,t.reviewCollectionsMap[n]=o})}return CourseRatings.prototype.setRatingValue=function setRatingValue(e){this.ratingValue=e},CourseRatings.prototype.setLearnerAudience=function setLearnerAudience(e){this.learnerAudience=e},CourseRatings.prototype.appendReviews=function appendReviews(n,t){var e=this.reviewCollection;e.appendPage(n),e.setTotalCount(t)},CourseRatings.prototype.deleteReview=function deleteReview(e){_(this.reviewCollectionsMap).each(function(n){return _(n).each(function(n){n.models=_(n.models).filter(function(n){return n.id!==e})})})},CourseRatings.prototype.setStats=function setStats(e){this.statsMap[this.learnerAudience.id]=e},t(CourseRatings,[{key:"reviewCollection",get:function get(){return this.reviewCollectionsMap[this.learnerAudience.id][this.ratingValue.value]}},{key:"stats",get:function get(){return this.statsMap[this.learnerAudience.id]}}]),CourseRatings}();module.exports=o});