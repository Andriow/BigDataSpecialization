define("bundles/content-feedback/components/rating/CourseRatingModal",["require","exports","module","classnames","react","./CourseRatingIcons","bundles/content-feedback/components/FeedbackEditor","bundles/content-feedback/models/RatingFeedback","bundles/cml/utils/CMLUtils","bundles/phoenix/components/Modal","./CourseRatingHeader","js/lib/coursera.react-intl","i18n!nls/content-feedback","css!./__styles__/CourseRatingModal"],function(require,exports,module){"use strict";function _defaults(e,r){for(var o=Object.getOwnPropertyNames(r),t=0;t<o.length;t++){var n=o[t],a=Object.getOwnPropertyDescriptor(r,n);a&&a.configurable&&void 0===e[n]&&Object.defineProperty(e,n,a)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):_defaults(t,e))}var n,a,r,o=require("classnames"),e=require("react"),s=require("./CourseRatingIcons"),c=require("bundles/content-feedback/components/FeedbackEditor"),i=require("bundles/content-feedback/models/RatingFeedback"),l=require("bundles/cml/utils/CMLUtils"),u=require("bundles/phoenix/components/Modal"),d=require("./CourseRatingHeader"),b=require("js/lib/coursera.react-intl"),m=b.FormattedHTMLMessage,t=require("i18n!nls/content-feedback");require("css!./__styles__/CourseRatingModal");var p=(a=n=function(n){function CourseRatingModal(t,o){_classCallCheck(this,CourseRatingModal);var e=_possibleConstructorReturn(this,n.call(this,t,o));r.call(e);var a=t.ratingFeedback,s=a.comment,c=a.value;return e.state={comment:s||l.create(),value:c},e}return _inherits(CourseRatingModal,n),CourseRatingModal.prototype.render=function render(){var n=0!==this.state.value,a=o("teach-btn","teach-btn-primary","c-course-rating-submit",{disabled:!n}),r=o("c-course-rating-clear","teach-btn","teach-btn-dark");return e.createElement(u,{className:"rc-CourseRatingModal",modalName:t("Rate this course"),handleClose:this.props.onClose},e.createElement(d,{catalogPCourse:this.props.course}),e.createElement("h3",null,t("Your review")),e.createElement(s,{size:"large",readOnly:!1,value:this.state.value,onClear:this.handleClear,onSelect:this.handleSelect}),e.createElement(c,{isFocused:!0,cml:this.state.comment,placeholder:t("Write your review (optional)"),onChange:this.handleChange}),e.createElement("div",{className:"body-1-text c-course-rating-disclaimer"},e.createElement(m,{message:t('By clicking Submit, I agree that my feedback may be viewed by the Coursera community,\n              in compliance with the Coursera <a href="https://www.coursera.org/about/terms" target="_blank">\n              Terms of Use</a> and My Profile privacy settings.')})),e.createElement("button",{title:t("Submit course review"),className:a,onClick:this.handleSubmit,disabled:!n},t("Submit")),!!this.props.ratingFeedback.value&&e.createElement("button",{title:t("Remove course review"),className:r,onClick:this.handleClear},t("Clear")))},CourseRatingModal}(e.Component),n.propTypes={course:e.PropTypes.object.isRequired,ratingFeedback:e.PropTypes.instanceOf(i).isRequired,onClose:e.PropTypes.func.isRequired,onSubmit:e.PropTypes.func.isRequired,onClear:e.PropTypes.func.isRequired},r=function _initialiseProps(){var e=this;this.handleChange=function(t){e.setState({comment:t})},this.handleSubmit=function(){e.props.onSubmit(e.state.value,e.state.comment)},this.handleClear=function(){e.props.onClear()},this.handleSelect=function(t){e.setState({value:t})}},a);module.exports=p});