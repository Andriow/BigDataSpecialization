define("bundles/userModal/views/requestEmail",["require","exports","module","underscore","bundles/userModal/lib/instrumentation","bundles/userModal/views/requestEmail.html","bundles/userModal/views/userModalForm"],function(require,exports,module){"use strict";var _=require("underscore"),e=require("bundles/userModal/lib/instrumentation"),i=require("bundles/userModal/views/requestEmail.html"),t=require("bundles/userModal/views/userModalForm"),s=t.extend({name:"requestEmail",state:"request-email",template:i,customInitialize:function customInitialize(e){this.listenTo(this.model,"thirdPartyAuthRequestEmail",this.onRequestEmail)},onEnterState:function onEnterState(){t.prototype.onEnterState.call(this),this.listenTo(this.model,"facebookLoginFail",this.showError)},onExitState:function onExitState(){this.stopListening(this.model,"facebookLoginFail")},onSubmitClick:function onSubmitClick(s){var t=this.model.get("accountType");s.preventDefault(),e.requestEmailSubmit(t);var i=_.defaults(this.serializeForm(),this.model.get("authData"));this.model.set("authData",i),this.model.tryFacebookLogin(i).fail(function(i){return e.requestEmailError(t,i)})},onRequestEmail:function onRequestEmail(t){this.model.set("accountType",t),e.requestEmailView(t),this.model.show(this.state)}});module.exports=s});